# Задача Влада и отпусков
Есть один проект для учёта рабочих дней и отпусков сотрудников. Необходимо написать калькулятор отпусков.

Каждый год сотрудник может отдохнуть 20 **рабочих** дней. 
Отпуск сотрудника накапливается равномерно, каждый календарный день и рассчитывается с момента найма и до начала сегодняшнего дня с округлением в меньшую сторону. Если сотрудник был **уволен** - отпуск рассчитывается до даты увольнения. 

Необходимо создать сервис, подсчитывающий две метрики:

- Суммарное количество всех дней отпуска, когда либо начисленных сотруднику (не важно, потраченных или нет) с момента трудоустройства по текущий момент.
- Отпускной баланс: количество непотраченных дней отпуска.

## Установка

```bash
git clone https://timofey_n@bitbucket.org/zimalab/task-vlad.git
cd task-vlad
composer install

# Затем нужно указать в .env.local правильный DATABASE_URL.

# Если база не создана - можно её создать
bin/console doctrine:database:create

# Нужно обновить схему бд и накатить фикстуры
bin/console doctrine:schema:update --force
bin/console doctrine:fixtures:load -n

# Проект готов к работе.
```

## Технические описание проекта

Сущность `Employee` представляет из себя данные о сотруднике в системе:

- `$hiredAt` — дата найма сотрудника. С этой даты рассчитывается отпуск.
- `$dismissedAt` — если не `null`, значит сотрудник был уволен в эту дату. Если `null` - значит сотрудник в данный момент работает.
- `$vacations` — коллекция всех использованных диапазонов отпусков.

Диапазон отпуска в сущности `Vacation` задаётся следующим образом: начало диапазона отпуска - начало дня начала отпуска, конец диапазона отпуска - начало **следующего** дня после окончания отпуска.

Есть интерфейс `App\Service\Vacation\VacationCalculatorInterface`, описывающий калькулятор отпусков.

Для просмотра таблицы отпусков есть команда `bin/console app:vacations:list`. Для запуска команды, реализация `VacationCalculatorInterface` уже должна присутствовать в проекте.

Также в проекте есть тесты, которыми можно проверить реализацию калькулятора. Запустить их можно с помощью команды `./bin/phpunit`

## Что нужно сделать

Нужно написать калькулятор `App\Service\Vacation\VacationCalculator`, реализующий оба публичных метода `getAvailableVacationDays` и `getTotalEarnedVacationDays`. 

Метод `getAvailableVacationDays` должен возвращать максимальное количество рабочих дней, на которые можно взять отпуск в данный момент. Также метод должен проверять, не накладываются ли даты разных отпусков друг на друга и не заходит ли диапазон дат отпуска за границы диапазона найма и увольнения. Если данные невалидны - нужно выбразывать, соответственно, `OverlappingVacationsException` и `VacationRangeOutOfBoundsException`.

Метод `getTotalEarnedVacationDays` должен возвращать суммарное количество всех дней отпуска, когда либо накопленных сотрудником (не важно, потраченных или нет) с момента трудоустройства по текущий момент (или по момент увольнения, если сотрудник был уволен). Показатель округляется в меньшую сторону.